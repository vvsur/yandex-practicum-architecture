# Задание 1-1 Анализ и планирование    
 

 ### Домены и C4

**Домены**
 - Управление характеристиками дома
- Управление устройствами
- Управление пользователями
- Управление телеметрией
- Управление уведомлениями

**Context**

![Диаграмма контекста системы](./PlantUML/1-1.png)



 

### Анализ текущего состояния проекта

**Язык программирования**

- **Java**: Приложение разработано на Java версии 17.

**Фреймворк**

- **Spring Boot**: Приложение построено на Spring Boot (версия 3.3.2), обеспечивая веб-интерфейсы и взаимодействие с базой данных через Spring Data JPA.

**База данных**

- **PostgreSQL**: В качестве базы данных используется PostgreSQL, с подключением, настроенным через Spring Data JPA.

**Архитектура**

- **Монолитная**: Вся система, включая обработку запросов, бизнес-логику и работу с данными, реализована в одном приложении.

**Взаимодействие**

- **Синхронное**: Запросы обрабатываются последовательно, что характерно для монолитных приложений на базе Spring Boot.

**Масштабируемость**

- **Ограниченная**: Масштабирование таких приложений затруднено, так как требует изменений в масштабировании всей системы.

**Развертывание**

- **Требует полной перезагрузки**: Обновления или изменения требуют остановки и перезапуска приложения.



---

# Задание 1-2 Архитектура микросервисов

**Изменения в архитектуре**

- Добавлены два микросервиса:
  - Управление устройствами (**devices-service**)
  - Телеметрия (**telemetry-service**)

![C4 Уровень контейнеров](./PlantUML/1-2-containers.png)
![C4 Уровень компонентов](./PlantUML/1-2-components.png)

---

# Задание 1-3 Определение сущностей

### Структура сущностей

1. **Пользователь (User)**
   - **id**: уникальный идентификатор
   - **username**: имя пользователя
   - **email**: адрес электронной почты
   - **password**: зашифрованный пароль
   - **role**: роль (например, администратор, пользователь)
   - **created_at**: дата создания
   - **updated_at**: дата обновления

2. **Дом (House)**
   - **id**: уникальный идентификатор
   - **name**: название (например, "Квартира", "Дом")
   - **address**: адрес
   - **owner_id**: ссылка на владельца (User)
   - **created_at**: дата создания
   - **updated_at**: дата обновления

3. **Устройство (Device)**
   - **id**: уникальный идентификатор
   - **name**: имя устройства
   - **serial_number**: серийный номер
   - **status**: состояние (включено/выключено)
   - **type_id**: ссылка на тип устройства
   - **house_id**: ссылка на дом
   - **created_at**: дата создания
   - **updated_at**: дата обновления

4. **Тип устройства (DeviceType)**
   - **id**: уникальный идентификатор
   - **name**: название типа (например, "Термостат")
   - **module_id**: ссылка на модуль
   - **description**: описание

5. **Модуль (Module)**
   - **id**: уникальный идентификатор
   - **name**: название модуля
   - **description**: описание функций

6. **Телеметрия (TelemetryData)**
   - **id**: уникальный идентификатор записи
   - **device_id**: ссылка на устройство
   - **timestamp**: время получения данных
   - **data**: телеметрические данные (например, температура)
   - **created_at**: дата создания записи

### Связи между сущностями

- **Пользователь (User)** может владеть несколькими **Домами (House)**.
- **Дом (House)** может содержать несколько **Устройств (Device)**.
- **Устройство (Device)** связано с определённым **Типом устройства (DeviceType)**.
- **Тип устройства (DeviceType)** относится к **Модулю (Module)**.
- **Устройство (Device)** может иметь несколько записей **Телеметрии (TelemetryData)**.

![ER-диаграмма](./PlantUML/er.svg)

---
